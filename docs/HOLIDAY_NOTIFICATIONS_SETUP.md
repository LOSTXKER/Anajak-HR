# р╕гр╕░р╕Ър╕Ър╣Бр╕Ир╣Йр╕Зр╣Ар╕Хр╕╖р╕нр╕Щр╕зр╕▒р╕Щр╕лр╕вр╕╕р╕Ф ЁЯОЙ

р╕гр╕░р╕Ър╕Ър╣Бр╕Ир╣Йр╕Зр╣Ар╕Хр╕╖р╕нр╕Щр╕зр╕▒р╕Щр╕лр╕вр╕╕р╕Фр╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤р╕Ьр╣Ир╕▓р╕Щ LINE

---

## ЁЯУЛ р╕Др╕╕р╕Ур╕кр╕бр╕Ър╕▒р╕Хр╕┤

тЬЕ р╣Бр╕Ир╣Йр╕Зр╣Ар╕Хр╕╖р╕нр╕Щр╕ер╣Ир╕зр╕Зр╕лр╕Щр╣Йр╕▓р╕Бр╣Ир╕нр╕Щр╕зр╕▒р╕Щр╕лр╕вр╕╕р╕Ф (р╕Ыр╕гр╕▒р╕Ър╣Др╕Фр╣Й 0-7 р╕зр╕▒р╕Щ)  
тЬЕ р╣Бр╕Ир╣Йр╕Зр╣Ар╕Хр╕╖р╕нр╕Щр╣Гр╕Щр╕зр╕▒р╕Щр╕лр╕вр╕╕р╕Ф  
тЬЕ р╕гр╕нр╕Зр╕гр╕▒р╕Ър╕зр╕▒р╕Щр╕лр╕вр╕╕р╕Фр╕Чр╕╕р╕Бр╕Ыр╕гр╕░р╣Ар╕ар╕Ч (р╕гр╕▓р╕Кр╕Бр╕▓р╕г, р╕Ър╕гр╕┤р╕йр╕▒р╕Ч, р╕кр╕▓р╕Вр╕▓)  
тЬЕ р╕Ыр╕гр╕▒р╕Ър╣Бр╕Хр╣Ир╕Зр╕Вр╣Йр╕нр╕Др╕зр╕▓р╕бр╣Др╕Фр╣Йр╕Ьр╣Ир╕▓р╕Щ Admin Settings

---

## тЪЩя╕П р╕Бр╕▓р╕гр╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓

### 1. р╕гр╕▒р╕Щ SQL Script

```sql
-- р╕гр╕▒р╕Щр╣Гр╕Щ Supabase SQL Editor
-- р╣Др╕Яр╕ер╣М: supabase/add-holiday-notification-settings.sql
```

### 2. р╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓р╣Гр╕Щр╕лр╕Щр╣Йр╕▓ Admin Settings

р╣Др╕Ыр╕Чр╕╡р╣И `/admin/settings` р╣Бр╕ер╕░р╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓:

- тЬЕ р╣Ар╕Ыр╕┤р╕Фр╣Бр╕Ир╣Йр╕Зр╣Ар╕Хр╕╖р╕нр╕Щр╕зр╕▒р╕Щр╕лр╕вр╕╕р╕Ф
- ЁЯУЕ р╣Бр╕Ир╣Йр╕Зр╣Ар╕Хр╕╖р╕нр╕Щр╕ер╣Ир╕зр╕Зр╕лр╕Щр╣Йр╕▓р╕Бр╕╡р╣Ир╕зр╕▒р╕Щ (0-7 р╕зр╕▒р╕Щ)
- ЁЯФФ р╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓ LINE Token р╣Бр╕ер╕░ Recipient ID

### 3. р╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓ Cron Job

#### Vercel Cron (р╣Бр╕Щр╕░р╕Щр╕│)

р╕кр╕гр╣Йр╕▓р╕Зр╣Др╕Яр╕ер╣М `vercel.json`:

```json
{
  "crons": [
    {
      "path": "/api/holiday-notifications",
      "schedule": "0 9 * * *"
    }
  ]
}
```

**р╕лр╕бр╕▓р╕вр╣Ар╕лр╕Хр╕╕:** Cron р╕Ир╕░р╕Чр╕│р╕Зр╕▓р╕Щр╣Ар╕зр╕ер╕▓ 09:00 UTC р╕Чр╕╕р╕Бр╕зр╕▒р╕Щ (16:00 р╕Щ. р╕Хр╕▓р╕бр╣Ар╕зр╕ер╕▓р╣Др╕Чр╕в UTC+7)

р╕Цр╣Йр╕▓р╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕гр╣Гр╕лр╣Йр╕Чр╕│р╕Зр╕▓р╕Щр╣Ар╕зр╕ер╕▓ 09:00 р╣Ар╕зр╕ер╕▓р╣Др╕Чр╕в р╣Гр╕лр╣Йр╣Гр╕Кр╣Й:
```json
{
  "crons": [
    {
      "path": "/api/holiday-notifications",
      "schedule": "0 2 * * *"
    }
  ]
}
```
(2:00 UTC = 09:00 ICT)

#### Alternative: р╣Ар╕гр╕╡р╕вр╕Б API р╕Ьр╣Ир╕▓р╕Щ External Cron

р╣Гр╕Кр╣Й service р╕нр╕вр╣Ир╕▓р╕З cron-job.org р╕лр╕гр╕╖р╕н EasyCron:

- **URL:** `https://your-domain.vercel.app/api/holiday-notifications`
- **Method:** POST р╕лр╕гр╕╖р╕н GET
- **Schedule:** р╕Чр╕╕р╕Бр╕зр╕▒р╕Щр╣Ар╕зр╕ер╕▓ 09:00

---

## ЁЯзк р╕Чр╕Фр╕кр╕нр╕Ър╕Бр╕▓р╕гр╕Чр╕│р╕Зр╕▓р╕Щ

### р╕Чр╕Фр╕кр╕нр╕Ър╕Ьр╣Ир╕▓р╕Щ Browser/Postman:

```bash
POST https://your-domain.vercel.app/api/holiday-notifications
# р╕лр╕гр╕╖р╕н
GET https://your-domain.vercel.app/api/holiday-notifications
```

### р╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕З Response:

```json
{
  "success": true,
  "message": "Holiday notifications sent",
  "notifications": [
    "Upcoming: р╕зр╕▒р╕Щр╕Ыр╕╡р╣Гр╕лр╕бр╣И",
    "Today: р╕зр╕▒р╕Щр╕лр╕вр╕╕р╕Фр╕Ър╕гр╕┤р╕йр╕▒р╕Ч"
  ]
}
```

---

## ЁЯУ▒ р╕гр╕╣р╕Ыр╣Бр╕Ър╕Ър╕Вр╣Йр╕нр╕Др╕зр╕▓р╕б

### р╣Бр╕Ир╣Йр╕Зр╣Ар╕Хр╕╖р╕нр╕Щр╕ер╣Ир╕зр╕Зр╕лр╕Щр╣Йр╕▓:

```
ЁЯОЙ р╣Бр╕Ир╣Йр╕Зр╣Ар╕Хр╕╖р╕нр╕Щр╕зр╕▒р╕Щр╕лр╕вр╕╕р╕Ф

ЁЯУЕ р╕зр╕▒р╕Щр╕Ыр╕╡р╣Гр╕лр╕бр╣И
ЁЯУЖ р╕зр╕▒р╕Щр╕Чр╕╡р╣И: 1 р╕бр╕Бр╕гр╕▓р╕Др╕б 2568
ЁЯПЦя╕П р╕Ыр╕гр╕░р╣Ар╕ар╕Ч: р╕зр╕▒р╕Щр╕лр╕вр╕╕р╕Фр╕гр╕▓р╕Кр╕Бр╕▓р╕г

р╕нр╕╡р╕Б 1 р╕зр╕▒р╕Щ р╕Ир╕░р╣Ар╕Ыр╣Зр╕Щр╕зр╕▒р╕Щр╕лр╕вр╕╕р╕Ф
```

### р╣Бр╕Ир╣Йр╕Зр╣Ар╕Хр╕╖р╕нр╕Щр╕зр╕▒р╕Щр╕лр╕вр╕╕р╕Ф (р╕зр╕▒р╕Щр╕Щр╕╡р╣Й):

```
ЁЯОК р╕зр╕▒р╕Щр╕Щр╕╡р╣Йр╣Ар╕Ыр╣Зр╕Щр╕зр╕▒р╕Щр╕лр╕вр╕╕р╕Ф!

ЁЯУЕ р╕зр╕▒р╕Щр╕Ыр╕╡р╣Гр╕лр╕бр╣И
ЁЯПЦя╕П р╕Ыр╕гр╕░р╣Ар╕ар╕Ч: р╕зр╕▒р╕Щр╕лр╕вр╕╕р╕Фр╕гр╕▓р╕Кр╕Бр╕▓р╕г

р╕Вр╕нр╣Гр╕лр╣Йр╕бр╕╡р╕Др╕зр╕▓р╕бр╕кр╕╕р╕Вр╕Бр╕▒р╕Ър╕зр╕▒р╕Щр╕лр╕вр╕╕р╕Ф! ЁЯШК
```

---

## ЁЯОи р╕Ыр╕гр╕▒р╕Ър╣Бр╕Хр╣Ир╕Зр╕Вр╣Йр╕нр╕Др╕зр╕▓р╕б

р╣Др╕Ыр╕Чр╕╡р╣И `/admin/settings/messages` р╣Ар╕Юр╕╖р╣Ир╕нр╣Бр╕Бр╣Йр╣Др╕В template:

- `line_msg_holiday_reminder` - р╕Вр╣Йр╕нр╕Др╕зр╕▓р╕бр╣Бр╕Ир╣Йр╕Зр╣Ар╕Хр╕╖р╕нр╕Щр╕ер╣Ир╕зр╕Зр╕лр╕Щр╣Йр╕▓
- `line_msg_holiday_today` - р╕Вр╣Йр╕нр╕Др╕зр╕▓р╕бр╕зр╕▒р╕Щр╕лр╕вр╕╕р╕Ф (р╕зр╕▒р╕Щр╕Щр╕╡р╣Й)

**р╕Хр╕▒р╕зр╣Бр╕Ыр╕гр╕Чр╕╡р╣Ир╣Гр╕Кр╣Йр╣Др╕Фр╣Й:**
- `{holidayName}` - р╕Кр╕╖р╣Ир╕нр╕зр╕▒р╕Щр╕лр╕вр╕╕р╕Ф
- `{date}` - р╕зр╕▒р╕Щр╕Чр╕╡р╣И (р╕кр╕│р╕лр╕гр╕▒р╕Ъ reminder)
- `{type}` - р╕Ыр╕гр╕░р╣Ар╕ар╕Чр╕зр╕▒р╕Щр╕лр╕вр╕╕р╕Ф
- `{message}` - р╕Вр╣Йр╕нр╕Др╕зр╕▓р╕бр╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤ (р╕нр╕╡р╕Бр╕Бр╕╡р╣Ир╕зр╕▒р╕Щ)

---

## ЁЯФз Troubleshooting

### р╣Др╕бр╣Ир╕бр╕╡р╣Бр╕Ир╣Йр╕Зр╣Ар╕Хр╕╖р╕нр╕Щр╕кр╣Ир╕Зр╕бр╕▓

1. тЬЕ р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓р╣Ар╕Ыр╕┤р╕Ф "р╣Ар╕Ыр╕┤р╕Фр╕Бр╕▓р╕гр╣Бр╕Ир╣Йр╕Зр╣Ар╕Хр╕╖р╕нр╕Щ" р╣Бр╕ер╕░ "р╣Ар╕Ыр╕┤р╕Фр╣Бр╕Ир╣Йр╕Зр╣Ар╕Хр╕╖р╕нр╕Щр╕зр╕▒р╕Щр╕лр╕вр╕╕р╕Ф"
2. тЬЕ р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ LINE Token р╣Бр╕ер╕░ Recipient ID
3. тЬЕ р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓р╕бр╕╡р╕зр╕▒р╕Щр╕лр╕вр╕╕р╕Фр╣Гр╕Щр╕гр╕░р╕Ър╕Ъ (`/admin/holidays`)
4. тЬЕ р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ Cron Job р╕Чр╕│р╕Зр╕▓р╕Щр╕лр╕гр╕╖р╕нр╣Др╕бр╣И
5. тЬЕ р╣Ар╕гр╕╡р╕вр╕Б API р╕Фр╣Йр╕зр╕вр╕Хр╕Щр╣Ар╕нр╕Зр╣Ар╕Юр╕╖р╣Ир╕нр╕Чр╕Фр╕кр╕нр╕Ъ

### р╕Фр╕╣ Logs

**Vercel:**
- Dashboard тЖТ Project тЖТ Logs тЖТ р╕Др╣Йр╕Щр╕лр╕▓ "Holiday Notifications"

**Local:**
```bash
npm run dev
# р╣Ар╕гр╕╡р╕вр╕Б http://localhost:3000/api/holiday-notifications
```

---

## ЁЯУК р╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕Зр╕Бр╕▓р╕гр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ

1. Admin р╣Ар╕Юр╕┤р╣Ир╕бр╕зр╕▒р╕Щр╕лр╕вр╕╕р╕Ф "р╕зр╕▒р╕Щр╕кр╕Зр╕Бр╕гр╕▓р╕Щр╕Хр╣М" р╕зр╕▒р╕Щр╕Чр╕╡р╣И 13 р╣Ар╕бр╕йр╕▓р╕вр╕Щ
2. р╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓р╣Бр╕Ир╣Йр╕Зр╣Ар╕Хр╕╖р╕нр╕Щр╕ер╣Ир╕зр╕Зр╕лр╕Щр╣Йр╕▓ 1 р╕зр╕▒р╕Щ
3. р╕зр╕▒р╕Щр╕Чр╕╡р╣И 12 р╣Ар╕бр╕йр╕▓р╕вр╕Щ р╣Ар╕зр╕ер╕▓ 09:00 тЖТ р╕кр╣Ир╕Зр╣Бр╕Ир╣Йр╕Зр╣Ар╕Хр╕╖р╕нр╕Щ "р╕нр╕╡р╕Б 1 р╕зр╕▒р╕Щ"
4. р╕зр╕▒р╕Щр╕Чр╕╡р╣И 13 р╣Ар╕бр╕йр╕▓р╕вр╕Щ р╣Ар╕зр╕ер╕▓ 09:00 тЖТ р╕кр╣Ир╕Зр╣Бр╕Ир╣Йр╕Зр╣Ар╕Хр╕╖р╕нр╕Щ "р╕зр╕▒р╕Щр╕Щр╕╡р╣Йр╣Ар╕Ыр╣Зр╕Щр╕зр╕▒р╕Щр╕лр╕вр╕╕р╕Ф"

---

## ЁЯЪА Production Checklist

- [ ] р╕гр╕▒р╕Щ SQL script `add-holiday-notification-settings.sql`
- [ ] р╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓ LINE Token р╣Бр╕ер╕░ Recipient ID
- [ ] р╣Ар╕Ыр╕┤р╕Ф "р╣Ар╕Ыр╕┤р╕Фр╕Бр╕▓р╕гр╣Бр╕Ир╣Йр╕Зр╣Ар╕Хр╕╖р╕нр╕Щ" р╣Бр╕ер╕░ "р╣Ар╕Ыр╕┤р╕Фр╣Бр╕Ир╣Йр╕Зр╣Ар╕Хр╕╖р╕нр╕Щр╕зр╕▒р╕Щр╕лр╕вр╕╕р╕Ф"
- [ ] р╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓ Cron Job (Vercel р╕лр╕гр╕╖р╕н External)
- [ ] р╣Ар╕Юр╕┤р╣Ир╕бр╕зр╕▒р╕Щр╕лр╕вр╕╕р╕Фр╣Гр╕Щр╕гр╕░р╕Ър╕Ъ
- [ ] р╕Чр╕Фр╕кр╕нр╕Ър╕Бр╕▓р╕гр╕кр╣Ир╕Зр╣Бр╕Ир╣Йр╕Зр╣Ар╕Хр╕╖р╕нр╕Щ

---

**р╕лр╕бр╕▓р╕вр╣Ар╕лр╕Хр╕╕:** р╕гр╕░р╕Ър╕Ър╕Ир╕░р╕кр╣Ир╕Зр╣Бр╕Ир╣Йр╕Зр╣Ар╕Хр╕╖р╕нр╕Щр╣Др╕Ыр╕вр╕▒р╕З LINE Group/User р╕Чр╕╡р╣Ир╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓р╣Др╕зр╣Йр╣Ар╕Чр╣Ир╕▓р╕Щр╕▒р╣Йр╕Щ р╣Др╕бр╣Ир╣Др╕Фр╣Йр╕кр╣Ир╕Зр╣Бр╕вр╕Бр╣Бр╕Хр╣Ир╕ер╕░р╕Др╕Щ

